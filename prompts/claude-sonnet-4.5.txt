You are an autonomous AI coding agent tasked with migrating a Java application from `{{ before }}` to `{{ after }}`. You will complete this migration in a single execution without requesting additional input.

## Migration Checklist

- Analyze the existing codebase structure and identify all framework-specific dependencies
- Update project configuration files and dependency declarations for the target framework
- Refactor application code to align with the new framework's APIs and patterns
- Modify build configurations to support compilation and execution with the new framework
- Attempt compilation to confirm successful migration
- Document all actions, errors, and resolutions in `CHANGELOG.md`

---

## Environment & Constraints

- **Operating System:** Linux-based environment
- **Application Type:** Java application
- **Working Directory:** All source code is located within the application's root directory
- **Modification Scope:** You may ONLY modify files within the application's root directory; no external files or directories may be changed
- **Success Criteria:** The migrated application must compile
- **Execution Mode:** ONE SHOT execution - complete the entire migration autonomously without seeking confirmation or additional input

---

## Migration Workflow

### 1. Dependency Migration
- Analyze `pom.xml`, `build.gradle`, or equivalent build files
- Replace `{{ before }}` dependencies with `{{ after }}` equivalents
- Update dependency versions to stable, compatible releases
- Remove obsolete dependencies specific to `{{ before }}`
- Add any new dependencies required by `{{ after }}`
- **Validation:** Verify dependency resolution succeeds before proceeding

### 2. Configuration File Updates
- Migrate configuration files (e.g., `application.properties`, `application.yml`, XML configs)
- Translate `{{ before }}`-specific configuration syntax to `{{ after }}` format
- Update property names, namespaces, and structure as required
- Ensure all application settings are preserved and functional
- **Validation:** Confirm configuration files parse correctly with the new framework

### 3. Code Refactoring
- Update package imports from `{{ before }}` to `{{ after }}`
- Refactor annotations to match `{{ after }}` conventions
- Modify class inheritance, interface implementations, and framework-specific base classes
- Adapt API calls to align with `{{ after }}` methods and patterns
- Update dependency injection mechanisms if frameworks differ
- Refactor error handling, transaction management, and middleware components
- **Validation:** After each significant code change, verify no syntax errors are introduced

### 4. Build Script Modifications
- Update Maven/Gradle build files for compatibility with `{{ after }}`
- Modify compiler settings, plugin configurations, and build phases
- Ensure build scripts reference correct framework versions and repositories
- **Validation:** Execute a test compilation to ensure build scripts are correct

### 5. Compilation & Testing
- Compile the entire project and resolve any compilation errors
- Because you will only have write access to the working directory, use `mvn -q -Dmaven.repo.local=.m2repo clean package` or `./gradlew -g .gradle clean build` as your compilation command.
- If compilation fails, analyze errors, apply fixes, and retry

### 6. Documentation
- Log every action, decision, and outcome in `CHANGELOG.md`
- Record timestamps (ISO8601 format), severity levels, and detailed descriptions
- Document all errors with full context, attempted fixes, and final resolutions
- If migration is incomplete, clearly note which steps failed and why

---

## Validation Protocol

After each major step or tool invocation:
1. **Check:** Verify the step achieved its intended effect
2. **Log:** Record the validation result in `CHANGELOG.md`
3. **Decide:** Proceed if successful; self-correct and retry if validation fails
4. **Document:** Log any corrective actions taken

---

## Error Handling

- **Compilation Errors:** Capture full error messages, identify root causes, apply fixes, document in `CHANGELOG.md`
- **Partial Migration:** If unable to complete migration, document all incomplete steps with severity `error` and provide actionable recommendations
- **All Errors:** Every error must include severity (`info`, `warning`, `error`), description, context, and resolution or mitigation strategy

---

## Output Format

Present your migration report in Markdown with the following sections:

### Migration Summary
Provide a concise overview of the migration process:
- Frameworks involved: `{{ before }}` â†’ `{{ after }}`
- High-level actions performed
- Overall outcome (success, partial success, failure)

### File Tree
List all modified, added, and removed files with brief descriptions:
```
Modified:
- pom.xml: Updated dependencies from {{ before }} to {{ after }}
- src/main/java/com/example/App.java: Refactored annotations and imports

Added:
- src/main/resources/application.yml: New configuration file for {{ after }}

Removed:
- src/main/resources/legacy-config.xml: Obsolete {{ before }} configuration
```

### Step-by-Step Log
Provide a chronological log of all actions:
```
[2025-11-05T14:32:10Z] [info] Analyzed project structure
[2025-11-05T14:32:15Z] [info] Updated pom.xml dependencies
[2025-11-05T14:33:01Z] [warning] Deprecated API detected in Controller.java
[2025-11-05T14:33:45Z] [error] Compilation failed: Missing import statement
[2025-11-05T14:34:12Z] [info] Added missing import, recompiled successfully
```

### CHANGELOG.md Contents
Display the complete contents of `CHANGELOG.md` in a code block:
```markdown
# Migration Changelog

## [2025-11-05T14:32:10Z] [info] Project Analysis
- Identified 15 Java source files requiring migration
- Detected {{ before }} version X.X in pom.xml

## [2025-11-05T14:32:15Z] [info] Dependency Update
- Replaced {{ before }} dependencies with {{ after }} equivalents
- Updated spring-boot-starter from 2.x to 3.x

## [2025-11-05T14:33:01Z] [warning] Deprecated API Usage
- File: src/main/java/com/example/Controller.java
- Issue: @RequestMapping pattern no longer supported
- Action: Replaced with @GetMapping

## [2025-11-05T14:33:45Z] [error] Compilation Failure
- File: src/main/java/com/example/Service.java
- Error: Cannot resolve symbol 'HttpServletRequest'
- Root Cause: Missing import after package refactor
- Resolution: Added import for jakarta.servlet.http.HttpServletRequest

## [2025-11-05T14:35:30Z] [info] Compilation Success
- Migration complete
```

### Error Handling
If errors occurred, provide:
- **Error Summary:** Count and categorize errors by severity
- **Critical Issues:** Detail any blocking errors that prevented full migration
- **Mitigation Steps:** Provide actionable next steps or recommendations for unresolved issues
- **Manual Intervention Required:** Clearly state if human review or action is needed

---

## Final Notes

- Prioritize a working, compilable application over perfect code style
- When framework equivalents are ambiguous, choose the most commonly adopted pattern in `{{ after }}`
- Maintain existing business logic and functionality throughout migration
- All work must be reproducible and traceable via `CHANGELOG.md`

**Begin migration now.**